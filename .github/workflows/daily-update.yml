name: Daily README Update

on:
  schedule:
    # UTC 12:00'de her gÃ¼n Ã§alÄ±ÅŸÄ±r (TÃ¼rkiye saati ile 15:00)
    - cron: '0 12 * * *'
  
  # Manuel tetikleme iÃ§in (test amaÃ§lÄ±)
  workflow_dispatch:

jobs:
  update-readme:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout repository
      uses: actions/checkout@v4
      with:
        token: ${{ secrets.PAT_TOKEN }}
    
    - name: Set up Git
      run: |
        git config --local user.email "action@github.com"
        git config --local user.name "GitHub Action Bot"
    
    - name: Update README
      run: |
        # Tarih ve saat bilgisini al (UTC+0)
        CURRENT_DATE=$(TZ=UTC date '+%Y-%m-%d')
        CURRENT_TIME=$(TZ=UTC date '+%H:%M:%S')
        CURRENT_DATETIME=$(TZ=UTC date '+%Y-%m-%d %H:%M:%S UTC')
        TIMESTAMP=$(TZ=UTC date '+%s')
        
        # README.md dosyasÄ±nÄ± oluÅŸtur
        echo "# ğŸ¤– Otomatik GÃ¼ncellenen Repository" > README.md
        echo "" >> README.md
        echo "Bu repository her gÃ¼n UTC 12:00'de otomatik olarak gÃ¼ncellenir." >> README.md
        echo "" >> README.md
        echo "## ğŸ“… Son GÃ¼ncelleme" >> README.md
        echo "" >> README.md
        echo "**Tarih:** \`$CURRENT_DATE\`  " >> README.md
        echo "**Saat:** \`$CURRENT_TIME\`  " >> README.md
        echo "**Tam Zaman:** \`$CURRENT_DATETIME\`" >> README.md
        echo "" >> README.md
        echo "---" >> README.md
        echo "" >> README.md
        echo "### ğŸ”„ GÃ¼ncelleme GeÃ§miÅŸi" >> README.md
        echo "" >> README.md
        echo "Son gÃ¼ncelleme GitHub Actions tarafÄ±ndan otomatik olarak gerÃ§ekleÅŸtirildi." >> README.md
        echo "" >> README.md
        echo "### âš™ï¸ NasÄ±l Ã‡alÄ±ÅŸÄ±r?" >> README.md
        echo "" >> README.md
        echo "Bu repository GitHub Actions kullanarak her gÃ¼n belirlenen saatte:" >> README.md
        echo "1. README.md dosyasÄ±nÄ± gÃ¼nceller" >> README.md
        echo "2. Yeni tarih ve saat bilgisini ekler" >> README.md
        echo "3. DeÄŸiÅŸiklikleri otomatik olarak commit eder ve push yapar" >> README.md
        echo "" >> README.md
        echo "### ğŸ“ Notlar" >> README.md
        echo "" >> README.md
        echo "- **GÃ¼ncelleme zamanÄ±:** Her gÃ¼n UTC 12:00" >> README.md
        echo "- **Timezone:** UTC+0" >> README.md
        echo "- **Bot:** GitHub Action Bot" >> README.md
        echo "- **Repository Sahibi:** @yusufyorunc" >> README.md
        echo "" >> README.md
        echo "### ğŸ“Š Ä°statistikler" >> README.md
        echo "" >> README.md
        echo "- **Unix Timestamp:** \`$TIMESTAMP\`" >> README.md
        echo "- **Workflow:** \`.github/workflows/daily-update.yml\`" >> README.md
        echo "" >> README.md
        echo "---" >> README.md
        echo "" >> README.md
        echo "*Bu dosya otomatik olarak gÃ¼ncellenmiÅŸtir.*" >> README.md
        echo "" >> README.md
        echo "<!-- Last update: $CURRENT_DATETIME -->" >> README.md
    
    - name: Commit and push changes
      run: |
        # DeÄŸiÅŸiklik olup olmadÄ±ÄŸÄ±nÄ± kontrol et
        if [[ -n $(git status -s) ]]; then
          git add README.md
          COMMIT_MESSAGE="ğŸ¤– Otomatik gÃ¼ncelleme: $(TZ=UTC date '+%Y-%m-%d %H:%M:%S UTC')"
          git commit -m "$COMMIT_MESSAGE"
          git push
          echo "âœ… README baÅŸarÄ±yla gÃ¼ncellendi!"
        else
          echo "â„¹ï¸ DeÄŸiÅŸiklik yok, gÃ¼ncelleme atlandÄ±."
        fi